# Feature Specification: Variables章节学习完成

**Feature Branch**: `006-learn-variables`  
**Created**: 2025-12-09  
**Status**: Draft  
**Input**: User description: "请完成学习Variables这个章节的内容。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 理解变量与存储 (Priority: P1)

学习者需要理解变量是什么、如何声明以及存储位置的含义，包括通过声明、new、复合字面量分配存储的区别。

**Why this priority**: 变量是后续类型和操作的基础，必须先建立正确心智模型。

**Independent Test**: 通过完成关于变量定义与存储方式的独立小测即可验证，无需依赖后续章节。

**Acceptance Scenarios**:

1. **Given** 提供变量声明示例和图示，**When** 学习者回答变量与值、存储位置的关系，**Then** 能正确描述并指出存储是如何被保留的。
2. **Given** new 调用与复合字面量示例，**When** 学习者区分两者分配存储的差异，**Then** 能正确指出产生匿名变量与指针引用的方式。

---

### User Story 2 - 静态类型与动态类型 (Priority: P2)

学习者需要区分静态类型（声明或推断得出）与接口变量的动态类型，并理解动态类型随赋值变化的情形。

**Why this priority**: 正确认知类型系统能避免后续接口使用的误解。

**Independent Test**: 针对接口变量的赋值与类型判断题即可独立验证，不依赖其他模块。

**Acceptance Scenarios**:

1. **Given** 接口变量初始为nil的示例，**When** 学习者识别其静态类型与动态类型，**Then** 答出静态类型为接口类型、动态类型为空。
2. **Given** 接口变量先被赋值为整型再赋值为指针，**When** 学习者说明动态类型变化，**Then** 能正确描述并区分值为nil与动态类型为指针的情况。

---

### User Story 3 - 零值与取值规则 (Priority: P3)

学习者需要掌握未赋值变量的零值、接口与指针零值表现，以及在表达式中取值的规则。

**Why this priority**: 零值规则直接影响初始化策略和防止空指针类错误。

**Independent Test**: 通过零值判断和取值行为的问答即可验证。

**Acceptance Scenarios**:

1. **Given** 多种类型的未赋值变量示例，**When** 学习者陈述其零值，**Then** 对整数、指针、接口的零值回答正确。
2. **Given** 访问结构化变量元素的示例，**When** 学习者解释元素的零值与寻址方式，**Then** 说明正确且不混淆顶层与元素值。

---

### Edge Cases

- 当接口变量的值为nil但静态类型为接口时，学习者需要能够区分值为nil与动态类型缺失的差别。
- 结构化变量（数组、切片、结构体）的元素在未单独赋值时的零值认知，避免误以为随顶层初始化变化。
- 通过复合字面量取地址时，学习者能理解生成匿名变量并通过指针引用的语义。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 必须解释变量的概念、值与存储位置的关系，覆盖声明、new、取复合字面量地址的分配方式。
- **FR-002**: 必须阐明结构化变量（数组、切片、结构体）元素可独立寻址，并说明其与顶层变量的关系。
- **FR-003**: 必须定义静态类型的来源（声明、new、复合字面量、元素类型）及其对可赋值性的约束。
- **FR-004**: 必须说明接口变量的动态类型随赋值变化的规则，并提供包含nil值与指针值的示例解析。
- **FR-005**: 必须讲解零值规则，覆盖未赋值变量、接口、指针以及结构化元素在表达式取值时的表现。
- **FR-006**: 必须提供可独立完成的理解测验（选择或判断题），至少覆盖变量存储方式、静态/动态类型区分和零值规则三类知识点。

### Key Entities *(include if feature involves data)*

- **变量**: 存储位置与当前值的绑定，具有静态类型，值可变。
- **静态类型**: 由声明或构造确定，决定可赋值的值域与编译期检查。
- **动态类型**: 接口变量在运行时承载的具体非接口类型，可能随赋值变化或为空。
- **零值**: 类型对应的默认值，当变量未被显式赋值时的取值结果。

## Assumptions & Dependencies

- 假设学习者已完成基础Go语法概览，具备变量声明的入门认知。
- 假设教学平台支持展示代码示例、运行简单演示并收集测验结果与反馈评分。
- 依赖现有课程框架提供小测与问卷模板，无需新增外部系统集成。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 通过变量定义与存储方式测验的学习者正确率>=90%。
- **SC-002**: 90%以上学习者能在动态类型辨识题中连续答对包含nil指针与整型的两道题。
- **SC-003**: 90%以上学习者能在零值与未赋值取值题中全部答对。
- **SC-004**: 学习反馈问卷中对变量章节理解清晰度平均评分>=4.5/5。